{% extends 'generic_layout.html.twig' %}

{% block head_title %}Quotus{% endblock %}

{% block script_additional %}
	<script src="{{ asset('js/jquery-ui-1.11.0/jquery-ui.min.js') }}"></script>	
	<script src="{{ asset('js/tag-it-master/js/tag-it.min.js') }}"></script>

	<script type="text/javascript">
		$(function()
		{
			$(".tagit").tagit({
				allowSpaces: true
			});
		});
	</script>
{% endblock %}

{% block style_additional %}
	<link rel="stylesheet" type="text/css" href="{{ asset('js/jquery-ui-1.11.0/jquery-ui.min.css') }}" />
	<link rel="stylesheet" type="text/css" href="{{ minify_file('js/tag-it-master/css/jquery.tagit.css') }}" />
{% endblock %}

{% block main_content %}
	<h2>{{ 'main.index.Search'|trans }}</h2>
	{% form_theme form 'Form/fields.html.twig' %}
	{{ form_start(form, {'method' : 'post', 'action' : path('index_search') , 'attr': {'novalidate': 'novalidate'} }) }}
		<div class="form-group row">
			{{ form_label(form.text, null, {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
			<div class="col-sm-10">
				{{ form_errors(form.text) }}{{ form_widget(form.text) }}
			</div>
		</div>
		<div class="form-group row">
			{{ form_label(form.type, null, {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
			<div class="col-sm-10">
				{{ form_errors(form.type) }}{{ form_widget(form.type, {'attr':{'class':'form-control'}}) }}
			</div>
		</div>
		<div class="form-group row">
			{{ form_label(form.source, null, {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
			<div class="col-sm-10">
				{{ form_errors(form.source) }}{{ form_widget(form.source, {'attr':{'class':'form-control'}}) }}
			</div>
		</div>
		<div class="form-group row">
			{{ form_label(form.biography, null, {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
			<div class="col-sm-10">
				{{ form_errors(form.biography) }}{{ form_widget(form.biography, {'attr':{'class':'form-control'}}) }}
			</div>
		</div>
		<br>
		{{ form_widget(form.search, {'icon': 'fa-search'}) }}
		{{ form_rest(form) }}
	{{ form_end(form) }}

	<hr class="flare">
	<h2>{{ 'main.index.Randomly'|trans }}{% if random is not null %} <a href="{{ path('read', {'id' : random.id, 'slug' : random.slug}) }}" class="btn btn-primary btn-sm"><i class="fas fa-info" aria-hidden="true"></i></a>{% endif %}</h2>
	{% if random is not null %}
		{% set ri = random_image(random) %}
		{% if ri is not null %}
			<div class="text-center">
				<img src="{{ asset('photo/quote/'~ri) }}" class="text-center" alt="">
			</div>
		{% else %}
			<div>
				<blockquote>{{ random.text|raw }}</blockquote>
			</div>
		{% endif %}
		<hr>
		{% if random.biography.isFictionalCharacter %}
		<p><b><a href="{{ path('fictionalcharacter', {'id': random.biography.id, 'slug': random.biography.slug}) }}">{{ random.biography.title }}</a></b>
		{% else %}
		<p><b><a href="{{ path('author', {'id': random.biography.id, 'slug': random.biography.slug}) }}">{{ random.biography.title }}</a></b>
		{% endif %}
		
		{% if random.source is not empty %}
			- <u><i><a href="{{ path('source', {'id': random.source.id, 'slug': random.source.slug}) }}">{{ random.source.title }}</a></i></u></p>
		{% endif %}
	{% else %}
		<div class="alert alert-danger text-center" role="alert">{{ 'main.index.NoQuote'|trans }}</div>
	{% endif %}
{% endblock %}